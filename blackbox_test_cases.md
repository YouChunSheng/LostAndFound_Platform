# 失物招领平台黑盒测试用例设计

## 1. 测试方法说明

本测试设计采用等价类划分和边界值分析法，针对失物招领平台的主要功能模块设计测试用例，包括：
- 用户输入验证
- API接口测试
- 数据处理逻辑验证

## 2. 功能模块分析

### 2.1 失物信息发布功能

#### 输入字段分析：

1. **标题(title)**
   - 类型：字符串
   - 必填：是
   - 长度限制：数据库中为VARCHAR(255)

2. **描述(description)**
   - 类型：字符串
   - 必填：是
   - 长度限制：数据库中为TEXT

3. **分类(category)**
   - 类型：枚举字符串
   - 必填：是
   - 可选值：证件、电子设备、衣物、书籍、其他

4. **丢失地点(lostLocation)**
   - 类型：字符串
   - 必填：是
   - 长度限制：数据库中为VARCHAR(255)

5. **丢失时间(lostTime)**
   - 类型：日期时间
   - 必填：是
   - 格式：YYYY-MM-DDTHH:mm

6. **联系方式(contactInfo)**
   - 类型：字符串
   - 必填：是
   - 长度限制：数据库中为VARCHAR(100)

7. **物品图片(image)**
   - 类型：文件
   - 必填：否
   - 限制：图片类型，大小限制为10MB

### 2.2 失物信息搜索功能

#### 搜索条件分析：

1. **关键词(keyword)**
   - 类型：字符串
   - 必填：否
   - 搜索范围：标题和描述

2. **分类(category)**
   - 类型：枚举字符串
   - 必填：否
   - 可选值：证件、电子设备、衣物、书籍、其他、空值

3. **丢失地点(location)**
   - 类型：字符串
   - 必填：否
   - 搜索方式：模糊匹配

4. **日期范围(dateFrom, dateTo)**
   - 类型：日期
   - 必填：否
   - 格式：YYYY-MM-DD

## 3. 等价类划分

### 3.1 标题字段(title)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 1-255字符(EL-1) | 空值(EL-2)、超过255字符(EL-3) |

### 3.2 描述字段(description)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 非空(EL-4) | 空值(EL-5) |

### 3.3 分类字段(category)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 值 | 证件(EL-6)、电子设备(EL-7)、衣物(EL-8)、书籍(EL-9)、其他(EL-10) | 空值(EL-11)、无效值(EL-12) |

### 3.4 丢失地点(lostLocation)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 1-255字符(EL-13) | 空值(EL-14)、超过255字符(EL-15) |

### 3.5 丢失时间(lostTime)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 格式 | YYYY-MM-DDTHH:mm格式(EL-16) | 空值(EL-17)、无效格式(EL-18) |

### 3.6 联系方式(contactInfo)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 1-100字符(EL-19) | 空值(EL-20)、超过100字符(EL-21) |

### 3.7 物品图片(image)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 文件类型 | 图片类型(EL-22) | 非图片类型(EL-23) |
| 文件大小 | ≤10MB(EL-24) | >10MB(EL-25) |
| 是否上传 | 上传(EL-26)、不上传(EL-27) | - |

### 3.8 搜索关键词(keyword)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 任意长度(EL-28) | - |
| 是否为空 | 非空(EL-29)、空值(EL-30) | - |

### 3.9 搜索分类(category)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 值 | 证件(EL-31)、电子设备(EL-32)、衣物(EL-33)、书籍(EL-34)、其他(EL-35)、空值(EL-36) | 无效值(EL-37) |

### 3.10 搜索地点(location)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 长度 | 任意长度(EL-38) | - |
| 是否为空 | 非空(EL-39)、空值(EL-40) | - |

### 3.11 搜索日期范围(dateFrom, dateTo)

| 输入条件 | 有效等价类 | 无效等价类 |
|---------|-----------|-----------|
| 格式 | YYYY-MM-DD格式(EL-41) | 无效格式(EL-42) |
| 是否为空 | 日期值(EL-43)、空值(EL-44) | - |

## 4. 边界值分析

### 4.1 标题字段(title)

| 测试数据 | 说明 |
|---------|------|
| 空字符串 | 边界值：最小长度-1 |
| 1个字符 | 边界值：最小长度 |
| 255个字符 | 边界值：最大长度 |
| 256个字符 | 边界值：最大长度+1 |

### 4.2 分类字段(category)

| 测试数据 | 说明 |
|---------|------|
| 证件、电子设备、衣物、书籍、其他 | 有效边界值 |
| 空值 | 无效边界值 |
| 证件类 | 无效边界值：相似但不匹配的值 |

### 4.3 丢失地点(lostLocation)

| 测试数据 | 说明 |
|---------|------|
| 空字符串 | 边界值：最小长度-1 |
| 1个字符 | 边界值：最小长度 |
| 255个字符 | 边界值：最大长度 |
| 256个字符 | 边界值：最大长度+1 |

### 4.4 丢失时间(lostTime)

| 测试数据 | 说明 |
|---------|------|
| 空值 | 无效边界值 |
| 有效日期时间 | 有效边界值 |
| 无效日期时间 | 无效边界值 |

### 4.5 联系方式(contactInfo)

| 测试数据 | 说明 |
|---------|------|
| 空字符串 | 边界值：最小长度-1 |
| 1个字符 | 边界值：最小长度 |
| 100个字符 | 边界值：最大长度 |
| 101个字符 | 边界值：最大长度+1 |

### 4.6 物品图片(image)

| 测试数据 | 说明 |
|---------|------|
| 无文件 | 边界值：最小文件大小 |
| 1字节 | 边界值：最小文件大小+1 |
| 10MB | 边界值：最大文件大小 |
| 10MB+1字节 | 边界值：最大文件大小+1 |

### 4.7 搜索日期范围(dateFrom, dateTo)

| 测试数据 | 说明 |
|---------|------|
| 空值 | 边界值：无日期限制 |
| 有效日期 | 边界值：有效日期 |
| 无效日期 | 边界值：无效日期格式 |

## 5. 测试用例设计

### 5.1 失物信息发布功能测试用例

#### TC-001: 标题字段测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-001-01 | 标题为空 | title="" | 发布失败，提示标题不能为空 |
| TC-001-02 | 标题为1个字符 | title="A" | 发布成功 |
| TC-001-03 | 标题为255个字符 | title="A"*255 | 发布成功 |
| TC-001-04 | 标题为256个字符 | title="A"*256 | 发布失败，提示标题过长 |

#### TC-002: 描述字段测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-002-01 | 描述为空 | description="" | 发布失败，提示描述不能为空 |

#### TC-003: 分类字段测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-003-01 | 分类为空 | category="" | 发布失败，提示分类不能为空 |
| TC-003-02 | 分类为有效值 | category="证件" | 发布成功 |
| TC-003-03 | 分类为无效值 | category="无效分类" | 发布失败，提示分类无效 |

#### TC-004: 丢失地点测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-004-01 | 丢失地点为空 | lostLocation="" | 发布失败，提示丢失地点不能为空 |
| TC-004-02 | 丢失地点为1个字符 | lostLocation="A" | 发布成功 |
| TC-004-03 | 丢失地点为255个字符 | lostLocation="A"*255 | 发布成功 |
| TC-004-04 | 丢失地点为256个字符 | lostLocation="A"*256 | 发布失败，提示丢失地点过长 |

#### TC-005: 丢失时间测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-005-01 | 丢失时间为空 | lostTime="" | 发布失败，或使用当前时间 |
| TC-005-02 | 丢失时间为有效格式 | lostTime="2025-11-16T10:30" | 发布成功 |
| TC-005-03 | 丢失时间为无效格式 | lostTime="2025/11/16 10:30" | 发布失败，或使用当前时间 |

#### TC-006: 联系方式测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-006-01 | 联系方式为空 | contactInfo="" | 发布失败，提示联系方式不能为空 |
| TC-006-02 | 联系方式为1个字符 | contactInfo="A" | 发布成功 |
| TC-006-03 | 联系方式为100个字符 | contactInfo="A"*100 | 发布成功 |
| TC-006-04 | 联系方式为101个字符 | contactInfo="A"*101 | 发布失败，提示联系方式过长 |

#### TC-007: 物品图片测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-007-01 | 不上传图片 | image=null | 发布成功 |
| TC-007-02 | 上传有效图片 | image=有效图片文件 | 发布成功，图片保存 |
| TC-007-03 | 上传非图片文件 | image=文本文件.txt | 发布失败，提示文件类型错误 |
| TC-007-04 | 上传超过10MB的图片 | image=大于10MB的图片 | 发布失败，提示文件过大 |

### 5.2 失物信息搜索功能测试用例

#### TC-008: 搜索关键词测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-008-01 | 关键词为空 | keyword="" | 返回所有失物信息 |
| TC-008-02 | 关键词匹配标题 | keyword="手机" | 返回标题包含"手机"的失物信息 |
| TC-008-03 | 关键词匹配描述 | keyword="丢失" | 返回描述包含"丢失"的失物信息 |

#### TC-009: 搜索分类测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-009-01 | 分类为空 | category="" | 不按分类筛选 |
| TC-009-02 | 分类为有效值 | category="证件" | 返回分类为"证件"的失物信息 |
| TC-009-03 | 分类为无效值 | category="无效分类" | 返回空结果或不筛选 |

#### TC-010: 搜索地点测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-010-01 | 地点为空 | location="" | 不按地点筛选 |
| TC-010-02 | 地点匹配 | location="教学楼" | 返回丢失地点包含"教学楼"的失物信息 |

#### TC-011: 搜索日期范围测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-011-01 | 日期范围都为空 | dateFrom="", dateTo="" | 不按日期筛选 |
| TC-011-02 | 只有开始日期 | dateFrom="2025-01-01", dateTo="" | 返回2025-01-01之后的失物信息 |
| TC-011-03 | 只有结束日期 | dateFrom="", dateTo="2025-12-31" | 返回2025-12-31之前的失物信息 |
| TC-011-04 | 完整日期范围 | dateFrom="2025-01-01", dateTo="2025-12-31" | 返回2025年全年的失物信息 |
| TC-011-05 | 无效日期格式 | dateFrom="2025/01/01" | 忽略无效日期或返回错误 |

### 5.3 综合测试用例

#### TC-012: 完整发布流程测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-012-01 | 所有字段都有效 | title="手机", description="丢失iPhone", category="电子设备", lostLocation="教学楼", lostTime="2025-11-16T10:30", contactInfo="13800138000" | 发布成功，可以在列表中看到该信息 |
| TC-012-02 | 缺少必填字段 | title="", description="丢失iPhone", category="电子设备", lostLocation="教学楼", lostTime="2025-11-16T10:30", contactInfo="13800138000" | 发布失败，提示缺少必填字段 |

#### TC-013: 完整搜索流程测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-013-01 | 多条件组合搜索 | keyword="手机", category="电子设备", location="教学楼", dateFrom="2025-01-01", dateTo="2025-12-31" | 返回同时满足所有条件的失物信息 |
| TC-013-02 | 无匹配结果搜索 | keyword="不存在的物品", category="证件", location="火星" | 返回空结果 |

#### TC-014: 异常日期范围测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-014-01 | dateFrom晚于dateTo | keyword="", category="", location="", dateFrom="2025-12-31", dateTo="2025-01-01" | 返回空结果列表 |

#### TC-015: 特殊字符处理测试
| 用例ID | 测试项 | 输入数据 | 预期结果 |
|--------|--------|----------|----------|
| TC-015-01 | SQL注入测试 | keyword="'; DROP TABLE lost_items; --" | 正确转义特殊字符，不执行恶意SQL |
| TC-015-02 | XSS攻击测试 | keyword="<script>alert('XSS')</script>" | 正确转义输出，不执行脚本 |
| TC-015-03 | LIKE特殊字符测试 | location="%_%[%]%" | 正确转义并匹配包含这些字符的地点 |

## 6. 安全性和性能测试建议

### 6.1 安全性测试

#### SQL注入测试
- 测试输入包含恶意SQL代码的参数
- 验证系统是否正确转义特殊字符
- 确保不会执行恶意SQL命令

#### XSS攻击测试
- 测试输入包含脚本代码的参数
- 验证系统是否正确转义输出
- 确保不会执行恶意脚本

### 6.2 性能测试

#### 大数据量搜索测试
- 在大量数据中进行搜索操作
- 验证系统响应时间和资源使用情况
- 确保在合理时间内返回结果

#### 并发搜索测试
- 模拟多个用户同时进行搜索
- 验证系统在高并发情况下的稳定性
- 确保不会出现数据混乱或系统崩溃

## 7. 测试执行建议

1. **测试环境准备**：
   - 准备测试数据库，包含初始测试数据
   - 确保文件上传目录有写入权限
   - 准备各种类型的测试图片文件

2. **测试数据准备**：
   - 插入多种分类的失物信息用于搜索测试
   - 插入不同时间范围的失物信息
   - 插入包含特殊关键词的失物信息

3. **自动化测试**：
   - 可以使用Selenium等工具进行UI层面的自动化测试
   - 使用JUnit进行接口层面的单元测试

4. **测试结果验证**：
   - 验证返回数据的正确性和完整性
   - 验证错误提示信息的友好性
   - 验证系统在异常情况下的稳定性